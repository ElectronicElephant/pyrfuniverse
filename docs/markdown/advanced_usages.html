<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced Usage Guides &mdash; pyrfuniverse  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Franka Robotics RL Environment Tutorial" href="../tutorials/franka_robotics.html" />
    <link rel="prev" title="Understanding pyrfuniverse" href="understanding_pyrfuniverse.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pyrfuniverse
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="get_started.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="understanding_pyrfuniverse.html">Understanding pyrfuniverse</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced Usage Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#instructions-for-using-unity-source-project-and-sdk">Instructions for using Unity source project and SDK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supplementing-missing-plugins-and-resources">Supplementing missing plugins and resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assets-directory-structure">Assets directory structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scene">Scene</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-sample-scenes-in-the-project">Running sample scenes in the project</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-a-scene">Building a Scene</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-process">Basic Process：</a></li>
<li class="toctree-l3"><a class="reference internal" href="#more-specific-process-in-tutorials">More specific process in Tutorials</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dynamic-message">Dynamic Message</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/franka_robotics.html">Franka Robotics RL Environment Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/kinova_catching_cloth.html">Kinova Gen2 Catching Cloth RL Environment Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/ur5_water_pushing.html">UR5 Water Pushing RL Environment Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/flexiv_cutting.html">Flexiv Cutting RL Environment Tutorial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/camera_rendering.html">Camera Rendering Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/point_cloud.html">Point Cloud from Images Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/scene_annotation.html">Annotating Image and Scene Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/loading_urdf.html">Loading URDF File Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/pick_and_place.html">Pick and Place Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/tobor_move.html">Embodied Robot Controlling Example</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pyrfuniverse.envs.html">pyrfuniverse.envs package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pyrfuniverse.attributes.html">pyrfuniverse.attributes package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pyrfuniverse.utils.html">pyrfuniverse.utils package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyrfuniverse</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Advanced Usage Guides</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/markdown/advanced_usages.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="advanced-usage-guides">
<span id="id1"></span><h1>Advanced Usage Guides<a class="headerlink" href="#advanced-usage-guides" title="Permalink to this heading"></a></h1>
<section id="instructions-for-using-unity-source-project-and-sdk">
<h2>Instructions for using Unity source project and SDK<a class="headerlink" href="#instructions-for-using-unity-source-project-and-sdk" title="Permalink to this heading"></a></h2>
<p><em>The following steps assume that you have a basic understanding of Unity Editor</em></p>
<p>If you want to add your own custom resources or functions to RFUniverse, you can do so by adding them to the RFUniverse open source project.</p>
<p>If you want to add RFUniverse functionality to your own project, you can import the <a class="reference external" href="https://github.com/mvig-robotflow/rfuniverse/releases">RFUniverse Core SDK</a></p>
<p><strong>If you encounter missing plugin errors in your project, you can restart the project and use the menu RFUniverse/CheckPlugins to fix them.</strong></p>
<hr class="docutils" />
<section id="supplementing-missing-plugins-and-resources">
<h3>Supplementing missing plugins and resources<a class="headerlink" href="#supplementing-missing-plugins-and-resources" title="Permalink to this heading"></a></h3>
<p>After opening the RFUniverse project or importing the RFUniverse Core SDK, you need to supplement third-party plugins and resources yourself to enable their functionality:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://assetstore.unity.com/publishers/5170">Obi</a>：Physical simulation plugins for soft bodies, cloth, fluids, etc.</p></li>
<li><p><a class="reference external" href="https://assetstore.unity.com/packages/tools/animation/bio-ik-67819">BioIK</a>：Joint IK solving plugins</p></li>
</ul>
<p><strong>Please put the plugins in the Plugins directory, import the plugins, and use the menu RFUniverse/CheckPlugins to fix dependencies</strong></p>
</section>
<hr class="docutils" />
<section id="assets-directory-structure">
<h3>Assets directory structure<a class="headerlink" href="#assets-directory-structure" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>AddressableAssetsData：The Unity Addressable Assets System fixed directory, which manages resource addresses and resource packaging configurations</p></li>
<li><p>Assets：Resource directory, which contains all dynamically loaded resources. <strong>If you don’t need to use built-in model and robot resources, you can delete them</strong></p>
<ul>
<li><p>Model：Model/texture/material resources</p></li>
<li><p>PhysicalMaterials：Physical materials</p></li>
<li><p>Prefab：Prefabs, assigned Addressable addresses for resource loading.</p></li>
</ul>
</li>
<li><p>Extend： Various expanded Attr modules</p></li>
<li><p>Plugins：Expanded plugin directory. Please put OBI, BioIK, and other plugins in this directory</p></li>
<li><p>RFUniverse：RFUniverse core functionality resources and scripts.</p></li>
<li><p>StreamingAssets：Configuration file save directory</p>
<ul>
<li><p>SceneData：Save directory for scene JSON files</p></li>
</ul>
</li>
<li><p>TextMesh Pro：UI resources</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="scene">
<h3>Scene<a class="headerlink" href="#scene" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>RFUniverse/First.unity：The first scene that the published program runs, which receives command-line parameters and then jumps to other scenes</p></li>
<li><p>RFUniverse/Empty.unity：Player mode scene</p></li>
<li><p>EditMode/Edit.unity：Edit mode scebe</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="running-sample-scenes-in-the-project">
<h3>Running sample scenes in the project<a class="headerlink" href="#running-sample-scenes-in-the-project" title="Permalink to this heading"></a></h3>
<p>The functional examples in the pyrfuniverse/Test directory can be run in both the Release and UnityEditor.</p>
<p>First, run the Empty scene once and then exit, then run a Python script and run the Empty scene in UnityEditor.</p>
</section>
</section>
<hr class="docutils" />
<section id="building-a-scene">
<h2>Building a Scene<a class="headerlink" href="#building-a-scene" title="Permalink to this heading"></a></h2>
<p>In RFUniverse, objects can be configured into Prefabs according to rules and dynamically loaded through Python interfaces at runtime. Alternatively, a fixed scene can be built in advance to communicate with Python. The choice between the two methods depends on whether you need to run different environments in a published version. In most cases, it is simpler and more efficient to build a scene in advance in the UnityEditor.</p>
<section id="basic-process">
<h3>Basic Process：<a class="headerlink" href="#basic-process" title="Permalink to this heading"></a></h3>
<ol class="arabic">
<li><p>Copy an Empty scene and add your objects.</p>
<p>Alternatively, import RFUniverse/Assets/Prefab/RFUniverse into an existing scene and remove the original MainCamera and Directional Light.</p>
</li>
<li><p>Add the BaseAttr script to the objects that need to communicate, manually assigning a unique ID to each object to ensure no duplicates.</p></li>
<li><p>Refer to pyrfuniverse/Test to write Python scripts that read information from objects using their IDs and call object interfaces.</p></li>
</ol>
</section>
<section id="more-specific-process-in-tutorials">
<h3>More specific process in Tutorials<a class="headerlink" href="#more-specific-process-in-tutorials" title="Permalink to this heading"></a></h3>
<p>For more details and more specific process in building your custom scene, please refer to the following tutorials.</p>
<ul class="simple">
<li><p><a class="reference internal" href="../tutorials/franka_robotics.html#franka-robotics"><span class="std std-ref">Franka Robotics RL Environment Tutorial</span></a></p></li>
<li><p><a class="reference internal" href="../tutorials/kinova_catching_cloth.html#kinova-cloth"><span class="std std-ref">Kinova Gen2 Catching Cloth RL Environment Tutorial</span></a></p></li>
<li><p><a class="reference internal" href="../tutorials/ur5_water_pushing.html#ur5-water"><span class="std std-ref">UR5 Water Pushing RL Environment Tutorial</span></a></p></li>
<li><p><a class="reference internal" href="../tutorials/flexiv_cutting.html#flexiv-cutting"><span class="std std-ref">Flexiv Cutting RL Environment Tutorial</span></a></p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="dynamic-message">
<h2>Dynamic Message<a class="headerlink" href="#dynamic-message" title="Permalink to this heading"></a></h2>
<p>In addition to fixed parameter interfaces, AssetManager also supports sending dynamic messages to enable two-way data communication, which is more flexible and convenient.</p>
<ul>
<li><p><strong>Python-&gt;Unity</strong></p>
<p>C#:</p>
<p><code class="docutils literal notranslate"><span class="pre">AssetManger.Instance.AddListener(string</span> <span class="pre">message,</span> <span class="pre">Action&lt;IncomingMessage&gt;</span> <span class="pre">action);</span></code></p>
<p>Open the listener by passing the message name and the message receiver function. The parameter type passed to the receiver function is <code class="docutils literal notranslate"><span class="pre">IncomingMessage</span></code></p>
<p>Python:</p>
<p><code class="docutils literal notranslate"><span class="pre">env.SendMessage(self,</span> <span class="pre">message:</span> <span class="pre">str,</span> <span class="pre">*args)</span></code></p>
<p>Pass the message name and any number of data to send.</p>
</li>
<li><p><strong>Unity-&gt;Python</strong></p>
<p>Python:</p>
<p><code class="docutils literal notranslate"><span class="pre">env.AddListener(self,</span> <span class="pre">message:</span> <span class="pre">str,</span> <span class="pre">fun)</span></code></p>
<p>Open the listener by passing the message name and the message receiver function. The parameter type passed to the receiver function is <code class="docutils literal notranslate"><span class="pre">IncomingMessage</span></code></p>
<p>C#:</p>
<p><code class="docutils literal notranslate"><span class="pre">AssetManger.Instance.SendMessage(string</span> <span class="pre">message,</span> <span class="pre">params</span> <span class="pre">object[]</span> <span class="pre">objects);</span></code></p>
<p>Pass the message name and any number of data to send.</p>
</li>
</ul>
<p><em>Please note that dynamic messages must ensure that the types and order of data read from IncomingMessage in the receiver function are the same as those passed in when sending the message. Otherwise, the program will throw an error.</em></p>
<p>Please refer to <a class="reference external" href="https://github.com/mvig-robotflow/pyrfuniverse/blob/main/Test/test_custom_message.py">pyrfuniverse/Test/test_custom_message.py</a> for a specific usage example of the dynamic message interface.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="understanding_pyrfuniverse.html" class="btn btn-neutral float-left" title="Understanding pyrfuniverse" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../tutorials/franka_robotics.html" class="btn btn-neutral float-right" title="Franka Robotics RL Environment Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, RobotFlow.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>